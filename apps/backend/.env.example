# ============================================================================
# Maigie Backend Environment Variables
# ============================================================================
# Copy this file to .env and update values as needed
# Default values are used if variables are not set

# ============================================================================
# Application Configuration
# ============================================================================
APP_NAME=Maigie API
APP_VERSION=0.1.0
APP_DESCRIPTION=AI-powered student companion API
DEBUG=false
ENVIRONMENT=development

# ============================================================================
# API Configuration
# ============================================================================
API_V1_STR=/api/v1
ALLOWED_HOSTS=localhost,127.0.0.1
FRONTEND_BASE_URL=
FRONTEND_URL=http://localhost:4200

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGINS=http://localhost:4200,http://localhost:5173,https://maigie.com,https://www.maigie.com,https://admin.maigie.com,https://dev-admin.maigie.com,http://localhost:4201
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*

# ============================================================================
# Security & Authentication
# ============================================================================
SECRET_KEY=dev-secret-key-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=43200
REFRESH_TOKEN_EXPIRE_DAYS=90

# ============================================================================
# Rate Limiting Configuration
# ============================================================================
# Enable/disable rate limiting middleware
RATE_LIMIT_ENABLED=true
# Maximum requests per minute per IP address
RATE_LIMIT_REQUESTS_PER_MINUTE=60
# Maximum requests per hour per IP address
RATE_LIMIT_REQUESTS_PER_HOUR=1000
# Maximum requests per authenticated user (capacity)
RATE_LIMIT_USER_CAPACITY=200
# Token refill rate per second for authenticated users
RATE_LIMIT_USER_REFILL_RATE=3.33

# ============================================================================
# Database Configuration
# ============================================================================
# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/maigie

# ============================================================================
# Redis Cache Configuration
# ============================================================================
REDIS_URL=redis://localhost:6379/0
REDIS_KEY_PREFIX=maigie:
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ============================================================================
# WebSocket Configuration
# ============================================================================
WEBSOCKET_HEARTBEAT_INTERVAL=30
WEBSOCKET_HEARTBEAT_TIMEOUT=60
WEBSOCKET_MAX_RECONNECT_ATTEMPTS=5

# ============================================================================
# OAuth Providers
# ============================================================================
# Google OAuth (optional)
OAUTH_GOOGLE_CLIENT_ID=
OAUTH_GOOGLE_CLIENT_SECRET=
OAUTH_BASE_URL=

# ============================================================================
# Celery Background Workers Configuration
# ============================================================================
# These are auto-generated from REDIS_URL if not set
# CELERY_BROKER_URL uses Redis DB 1
# CELERY_RESULT_BACKEND uses Redis DB 2
CELERY_BROKER_URL=
CELERY_RESULT_BACKEND=
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_ACKS_LATE=true
CELERY_TASK_REJECT_ON_WORKER_LOST=true
CELERY_WORKER_PREFETCH_MULTIPLIER=1
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TASK_DEFAULT_EXCHANGE=tasks
CELERY_TASK_DEFAULT_ROUTING_KEY=default
CELERY_RESULT_EXPIRES=3600

# ============================================================================
# Logging & Monitoring
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=json
# Sentry DSN for error tracking (optional)
SENTRY_DSN=
SENTRY_TRACES_SAMPLE_RATE=0.1

# ============================================================================
# Email Configuration (SMTP)
# ============================================================================
SMTP_HOST=
SMTP_PORT=
SMTP_USER=
SMTP_PASSWORD=
EMAILS_FROM_EMAIL=
EMAILS_FROM_NAME=
EMAIL_LOGO_URL=

# ============================================================================
# Brevo (formerly Sendinblue) CRM Integration
# ============================================================================
BREVO_API_KEY=
BREVO_ENABLED=true

# ============================================================================
# Stripe Subscription Configuration
# ============================================================================
STRIPE_SECRET_KEY=
STRIPE_PUBLISHABLE_KEY=
STRIPE_WEBHOOK_SECRET=
STRIPE_WEBHOOK_DESTINATION_ID=
STRIPE_PRICE_ID_MONTHLY=
STRIPE_PRICE_ID_YEARLY=

# ============================================================================
# BunnyCDN Storage Configuration
# ============================================================================
BUNNY_CDN_API_KEY=
BUNNY_STORAGE_ZONE=
BUNNY_CDN_HOSTNAME=cdn.maigie.com
